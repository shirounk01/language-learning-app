{% extends "quiz_base.html" %}
{% load static %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/word_definition.css' %}">
    <link rel="stylesheet" href="{% static 'css/quiz.css' %}">
{% endblock extra_css %}
{% block quiz-block %}
    <script>
        $(document).ready(function() {
            $("#total").text(words.length);
            updateQuestion();
        });

        function updateQuestion(){
            updateWord()

            for(var i = 0; i < words[index].choices.length; i++){
                $("#choice-" + (i+1)).text(words[index].choices[i])
            }
        }
        
        var lastChoice;
        $(document).on("click", ".btn", function(e){
            let id = "#" + $(this).attr("id")
            lastChoice = $(id)
            removeButtonSelection()
            lastChoice.toggleClass("btn-primary")
            lastChoice.toggleClass("btn-outline-primary")
        })

        function removeButtonSelection(){
            let selectedBtn = $(".btn-primary")
            selectedBtn.toggleClass("btn-primary")
            selectedBtn.toggleClass("btn-outline-primary")
        }

        $(document).on("dblclick", ".btn", function(e){
            if($("#result-box").hasClass("d-none")){
                var inputVal = lastChoice.text();

                handleResult(inputVal)
                
            }
        })

        $(document).on("click", function(e){
            if(!$("#result-box").hasClass("d-none")){
                cleanUpQuestion()
                removeButtonSelection()
                updateQuestion();
            }
        })
    </script>
    <div class="word-name text-center ">
        <a id="word"
           class="text-reset text-decoration-none text-dark"
           href=""
           target="_blank"
           data-toggle="tooltip"
           data-placement="right"
           title=""></a>
    </div>
    <div class="d-flex justify-content-between mx-4">
        <p>Translate the word above</p>
        <p>
            Score <span id="current-score">0</span>/<span id="total"></span>
        </p>
    </div>
    <div class=" d-flex justify-content-center">
        <div class="mx-1 col-4">
            <button class="btn btn-outline-primary col-12 my-1" id="choice-1"></button>
            <button class="btn btn-outline-primary col-12 my-1" id="choice-2"></button>
        </div>
        <div class="mx-1 col-4">
            <button class="btn btn-outline-primary col-12 my-1" id="choice-3"></button>
            <button class="btn btn-outline-primary col-12 my-1" id="choice-4"></button>
        </div>
    </div>
    <hr class="m-0 mt-4 mx-4 pb-0">
    <div id="result-box" class="d-none">
        <div class="d-flex justify-content-center">
            <div id="result-text" class="result-text text-center p-3 col-8"></div>
        </div>
    </div>
{% endblock quiz-block %}
